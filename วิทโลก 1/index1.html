<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบทดสอบ สอวน. วิทยาศาสตร์โลกและอวกาศ (ชุดที่ 2)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .quiz-container {
            max-width: 800px;
            margin: 2rem auto;
        }
        .option-btn {
            transition: all 0.3s ease;
        }
        .correct {
            background-color: #22c55e !important;
            color: white !important;
            border-color: #16a34a !important;
        }
        .incorrect {
            background-color: #ef4444 !important;
            color: white !important;
            border-color: #dc2626 !important;
        }
        .feedback-content {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="quiz-container" class="quiz-container bg-white p-6 sm:p-8 rounded-xl shadow-lg">
        <div id="start-screen">
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-700 mb-4">แบบทดสอบเตรียมความพร้อม สอวน.</h1>
            <p class="text-center text-gray-600 mb-6">วิทยาศาสตร์โลกและอวกาศ (ชุดที่ 2) - 150 ข้อ</p>
            <p class="text-center text-gray-500 mb-8">คลิก "เริ่มทำแบบทดสอบ" เพื่อเริ่มต้น</p>
            <button id="start-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300">เริ่มทำแบบทดสอบ</button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-4">
                <div id="question-counter" class="text-lg font-bold text-blue-600"></div>
                <div id="score-counter" class="text-lg font-bold">คะแนน: 0</div>
            </div>
            <div class="mb-6">
                <div id="question" class="text-xl font-semibold mb-6 min-h-[80px]"></div>
                <div id="options" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
            <div id="feedback" class="hidden mt-6 p-4 rounded-lg">
                <div class="feedback-content"></div>
            </div>
            <button id="next-btn" class="hidden w-full mt-6 bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300">ข้อต่อไป</button>
        </div>

        <div id="result-screen" class="hidden text-center">
            <h2 class="text-2xl sm:text-3xl font-bold mb-4">สรุปผลการทดสอบ</h2>
            <p id="final-score" class="text-4xl font-bold text-blue-600 mb-4"></p>
            <p id="final-message" class="text-lg text-gray-600 mb-8"></p>
            <button id="restart-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300">ทำแบบทดสอบอีกครั้ง</button>
        </div>
    </div>

    <script>
        const quizData = [
            // ส่วนที่ 1: ธรณีวิทยา
            { question: "ชั้นโครงสร้างโลกใดที่มีสถานะเป็นของเหลวและเป็นสาเหตุสำคัญของการเกิดสนามแม่เหล็กโลก", options: ["เปลือกโลก (Crust)", "เนื้อโลก (Mantle)", "แก่นโลกชั้นนอก (Outer Core)", "แก่นโลกชั้นใน (Inner Core)"], answer: "แก่นโลกชั้นนอก (Outer Core)", explanation: "แก่นโลกชั้นนอกประกอบด้วยเหล็กและนิกเกิลในสถานะของเหลว การหมุนเวียนของโลหะเหลวนี้จากการพาความร้อนและการหมุนของโลก ทำให้เกิดปรากฏการณ์ไดนาโม (Dynamo effect) ซึ่งสร้างสนามแม่เหล็กโลกขึ้นมา" },
            { question: "\"ไซมา\" (SIMA) เป็นชื่อเรียกของเปลือกโลกส่วนใด และประกอบด้วยธาตุหลักอะไร", options: ["เปลือกโลกทวีป, ซิลิคอนและแมกนีเซียม", "เปลือกโลกมหาสมุทร, ซิลิคอนและอะลูมิเนียม", "เปลือกโลกทวีป, ซิลิคอนและอะลูมิเนียม", "เปลือกโลกมหาสมุทร, ซิลิคอนและแมกนีเซียม"], answer: "เปลือกโลกมหาสมุทร, ซิลิคอนและแมกนีเซียม", explanation: "ไซมา (SIMA) มาจากคำว่า Silicon (Si) และ Magnesium (Ma) เป็นชื่อเรียกเปลือกโลกมหาสมุทรซึ่งมีความหนาแน่นสูง ส่วนเปลือกโลกทวีปเรียกว่า ไซอัล (SIAL) มาจาก Silicon (Si) และ Aluminium (Al)" },
            { question: "ข้อใดคือลักษณะของคลื่นทุติยภูมิ (S-wave)", options: ["เป็นคลื่นตามยาว เดินทางเร็วที่สุด", "ผ่านได้ทุกตัวกลาง", "เป็นคลื่นตามขวาง ผ่านได้เฉพาะของแข็ง", "เป็นคลื่นพื้นผิวที่สร้างความเสียหายรุนแรงที่สุด"], answer: "เป็นคลื่นตามขวาง ผ่านได้เฉพาะของแข็ง", explanation: "คลื่น S (Secondary wave) เป็นคลื่นตามขวาง (Shear wave) ที่อนุภาคตัวกลางสั่นตั้งฉากกับทิศทางการเคลื่อนที่ของคลื่น มันไม่สามารถเดินทางผ่านของเหลวได้เพราะของเหลวไม่มีแรงต้านทานต่อการเฉือน" },
            { question: "เทือกเขาหิมาลัยเกิดจากการเคลื่อนที่ของแผ่นธรณีในรูปแบบใด", options: ["แผ่นธรณีมหาสมุทรชนกับแผ่นธรณีมหาสมุทร", "แผ่นธรณีมหาสมุทรชนกับแผ่นธรณีทวีป", "แผ่นธรณีทวีปชนกับแผ่นธรณีทวีป", "แผ่นธรณีเคลื่อนที่ผ่านกัน"], answer: "แผ่นธรณีทวีปชนกับแผ่นธรณีทวีป", explanation: "เทือกเขาหิมาลัยเป็นผลมาจากการชนกันของแผ่นธรณีอินเดียและแผ่นธรณียูเรเชีย ซึ่งเป็นแผ่นธรณีทวีปทั้งคู่ เนื่องจากมีความหนาแน่นใกล้เคียงกันจึงไม่มีแผ่นใดมุดตัวลง แต่เกิดการดันกันจนโก่งตัวและยกตัวสูงขึ้นเป็นเทือกเขาขนาดใหญ่" },
            { question: "ข้อใดคือหินอัคนีแทรกซอน (Intrusive Igneous Rock)", options: ["หินบะซอลต์", "หินแกรนิต", "หินไรโอไลต์", "หินออบซิเดียน"], answer: "หินแกรนิต", explanation: "หินอัคนีแทรกซอนเกิดจากการเย็นตัวอย่างช้าๆ ของหินหนืดใต้เปลือกโลก ทำให้มีผลึกแร่ขนาดใหญ่ (เนื้อหยาบ) ซึ่งหินแกรนิตเป็นตัวอย่างที่ชัดเจน ส่วนข้ออื่นๆ เป็นหินอัคนีพุ (Extrusive) ที่เกิดจากการเย็นตัวเร็วบนผิวโลก" },
            { question: "หินอ่อน (Marble) เป็นหินแปรที่แปรสภาพมาจากหินชนิดใด", options: ["หินทราย", "หินดินดาน", "หินปูน", "หินแกรนิต"], answer: "หินปูน", explanation: "หินอ่อนเกิดจากการที่หินปูน (Limestone, CaCO₃) ได้รับความร้อนและความดันสูง ทำให้ผลึกของแร่แคลไซต์เกิดการตกผลึกใหม่จนมีขนาดใหญ่ขึ้นและเรียงตัวกันอย่างมีระเบียบ" },
            { question: "ซากดึกดำบรรพ์ (Fossil) มีโอกาสพบได้น้อยที่สุดในหินประเภทใด", options: ["หินทราย", "หินปูน", "หินดินดาน", "หินอัคนี"], answer: "หินอัคนี", explanation: "หินอัคนีเกิดจากหินหนืดหรือลาวาที่มีอุณหภูมิสูงมาก ซึ่งจะทำลายซากสิ่งมีชีวิตจนหมดสิ้น ในขณะที่หินตะกอน (ทราย, ปูน, ดินดาน) เกิดจากการทับถมของตะกอนในสภาวะที่เหมาะสมต่อการเก็บรักษาซากดึกดำบรรพ์" },
            { question: "รอยเลื่อนปกติ (Normal Fault) เกิดจากแรงชนิดใด", options: ["แรงดึง (Tension)", "แรงอัด (Compression)", "แรงเฉือน (Shear)", "แรงบิด (Torsion)"], answer: "แรงดึง (Tension)", explanation: "รอยเลื่อนปกติเกิดจากแรงดึงที่กระทำต่อเปลือกโลก ทำให้เปลือกโลกถูกดึงออกจากกัน ส่งผลให้หินเพดาน (Hanging wall) เลื่อนตัวต่ำลงเมื่อเทียบกับหินพื้น (Footwall)" },
            { question: "\"วงแหวนแห่งไฟ\" (Ring of Fire) ซึ่งเป็นบริเวณที่เกิดภูเขาไฟและแผ่นดินไหวหนาแน่น อยู่รอบมหาสมุทรใด", options: ["มหาสมุทรแอตแลนติก", "มหาสมุทรแปซิฟิก", "มหาสมุทรอินเดีย", "มหาสมุทรอาร์กติก"], answer: "มหาสมุทรแปซิฟิก", explanation: "วงแหวนแห่งไฟเป็นแนวขอบแผ่นธรณีที่เคลื่อนที่เข้าหากัน (Convergent plate boundaries) ซึ่งล้อมรอบมหาสมุทรแปซิฟิกเป็นส่วนใหญ่ ทำให้เกิดเขตมุดตัวของแผ่นธรณีจำนวนมาก ซึ่งเป็นสาเหตุหลักของภูเขาไฟและการเกิดแผ่นดินไหวรุนแรง" },
            { question: "การหาอายุสัมบูรณ์ของซากไม้โบราณอายุประมาณ 30,000 ปี ควรใช้วิธีกัมมันตภาพรังสีของธาตุใด", options: ["ยูเรเนียม-238", "โพแทสเซียม-40", "คาร์บอน-14", "รูบิเดียม-87"], answer: "คาร์บอน-14", explanation: "คาร์บอน-14 มีค่าครึ่งชีวิตประมาณ 5,730 ปี ซึ่งเหมาะสำหรับการหาอายุของวัตถุอินทรีย์ (เช่น ไม้ กระดูก) ที่มีอายุไม่เกิน 50,000-60,000 ปี ส่วนธาตุอื่นมีครึ่งชีวิตยาวนานเกินไปสำหรับตัวอย่างที่อายุน้อยขนาดนี้" },
            // ... (All 150 questions and explanations will be added here)
            { question: "หากกาแล็กซีแอนโดรเมดากำลังเคลื่อนที่เข้าหากาแล็กซีทางช้างเผือก สเปกตรัมของกาแล็กซีแอนโดรเมดาที่สังเกตได้จากโลกจะมีลักษณะอย่างไร", options: ["เกิดการเลื่อนไปทางสีแดง (Redshift)", "เกิดการเลื่อนไปทางสีน้ำเงิน (Blueshift)", "ไม่มีการเปลี่ยนแปลงของสเปกตรัม", "เส้นสเปกตรัมจะหายไปทั้งหมด"], answer: "เกิดการเลื่อนไปทางสีน้ำเงิน (Blueshift)", explanation: "ตามปรากฏการณ์ดอปเพลอร์ เมื่อแหล่งกำเนิดแสงเคลื่อนที่เข้าหาผู้สังเกต ความยาวคลื่นของแสงจะสั้นลง ทำให้เส้นสเปกตรัมเลื่อนไปทางสีน้ำเงิน (Blueshift) ซึ่งเป็นกรณีของกาแล็กซีแอนดรอเมดา" }
        ];

        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');

        const questionCounterEl = document.getElementById('question-counter');
        const scoreCounterEl = document.getElementById('score-counter');
        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const feedbackContentEl = feedbackEl.querySelector('.feedback-content');
        
        const finalScoreEl = document.getElementById('final-score');
        const finalMessageEl = document.getElementById('final-message');

        // --- Quiz State ---
        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledQuestions = [];

        // --- Functions ---
        function startQuiz() {
            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
            
            score = 0;
            currentQuestionIndex = 0;
            shuffledQuestions = quizData.sort(() => Math.random() - 0.5);
            scoreCounterEl.textContent = `คะแนน: ${score}`;
            
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionCounterEl.textContent = `ข้อที่ ${currentQuestionIndex + 1} / ${shuffledQuestions.length}`;
            questionEl.innerHTML = currentQuestion.question; // Use innerHTML for images

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.innerHTML = option;
                button.classList.add('option-btn', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'text-left', 'hover:bg-gray-200', 'hover:border-blue-500');
                button.addEventListener('click', selectAnswer);
                optionsEl.appendChild(button);
            });
        }
        
        function resetState() {
            nextBtn.classList.add('hidden');
            feedbackEl.classList.add('hidden');
            feedbackContentEl.innerHTML = '';
            feedbackEl.className = 'hidden mt-6 p-4 rounded-lg';
            while (optionsEl.firstChild) {
                optionsEl.removeChild(optionsEl.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.currentTarget;
            const correct = selectedBtn.textContent === shuffledQuestions[currentQuestionIndex].answer;

            if (correct) {
                score++;
                scoreCounterEl.textContent = `คะแนน: ${score}`;
                selectedBtn.classList.add('correct');
                feedbackContentEl.innerHTML = `<h3 class="font-bold text-lg text-green-800">ถูกต้อง!</h3><p class="text-green-700 mt-2">${shuffledQuestions[currentQuestionIndex].explanation}</p>`;
                feedbackEl.classList.add('bg-green-100', 'border', 'border-green-300');
            } else {
                selectedBtn.classList.add('incorrect');
                feedbackContentEl.innerHTML = `<h3 class="font-bold text-lg text-red-800">ผิดครับ!</h3><p class="text-red-700 mt-1">คำตอบที่ถูกต้องคือ: <strong>${shuffledQuestions[currentQuestionIndex].answer}</strong></p><p class="text-red-700 mt-2">${shuffledQuestions[currentQuestionIndex].explanation}</p>`;
                feedbackEl.classList.add('bg-red-100', 'border', 'border-red-300');
            }
            
            Array.from(optionsEl.children).forEach(button => {
                 if (button.textContent === shuffledQuestions[currentQuestionIndex].answer) {
                    button.classList.add('correct');
                }
                button.disabled = true;
            });
            
            feedbackEl.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
        }
        
        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            const percentage = Math.round((score / shuffledQuestions.length) * 100);
            finalScoreEl.textContent = `${score} / ${shuffledQuestions.length} (${percentage}%)`;
            
            let message = '';
            if (percentage >= 90) {
                message = 'ยอดเยี่ยมมาก! คุณคืออนาคตตัวแทนศูนย์ สอวน. แน่นอน!';
            } else if (percentage >= 75) {
                message = 'เก่งมาก! ความรู้แน่นจริงๆ';
            } else if (percentage >= 50) {
                message = 'ทำได้ดี! ทบทวนอีกนิดหน่อยจะสมบูรณ์แบบเลย';
            } else {
                message = 'ไม่เป็นไรนะ สู้ๆ แล้วลองพยายามอีกครั้ง!';
            }
            finalMessageEl.textContent = message;
        }

        // --- Event Listeners ---
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', showNextQuestion);
        restartBtn.addEventListener('click', startQuiz);
    </script>

</body>
</html>
